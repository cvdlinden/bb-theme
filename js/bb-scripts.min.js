/*!
 * Custom theme scripts
 * 
 * TODO: Make sense of this!
 */
function testimonialHeight(){jQuery(".testimonial-section .parallax-window").css("height",jQuery(".testimonial-section .parallax-window .container").outerHeight()+150),jQuery(window).trigger("resize").trigger("scroll")}!function(e){function t(){e(window).scrollTop()>o?n.addClass("fixed scrolled"):n.removeClass("fixed scrolled")}function i(){var e=jQuery(".masonryFlyIn .masonry-item"),t=0;e.each(function(){var e=jQuery(this);setTimeout(function(){e.addClass("fadeIn")},t),t+=170})}var n,o;jQuery(document).ready(function(e){e(window).width()>=767&&e(".navbar-nav > li.menu-item > a").click(function(){window.location=e(this).attr("href")}),jQuery(".inner-link").each(function(){var e=jQuery(this).attr("href");"#"!==e.charAt(0)&&jQuery(this).removeClass("inner-link")}),jQuery(".inner-link").click(function(){return jQuery("html, body").animate({scrollTop:0},1e3),!1}),n=e("body .nav-container nav:first"),o=e("body .nav-container nav:first").outerHeight(),window.addEventListener("scroll",t,!1),t(),e(".menu > li > ul").each(function(){var t=e(this).offset(),i=t.left+e(this).outerWidth(!0);if(i>e(window).width()&&!e(this).hasClass("mega-menu"))e(this).addClass("make-right");else if(i>e(window).width()&&e(this).hasClass("mega-menu")){var n=e(window).width()-t.left,o=e(this).outerWidth(!0)-n;e(this).css("margin-left",-o)}}),e(".mobile-toggle").click(function(){e(".nav-bar").toggleClass("nav-open"),e(this).toggleClass("active"),e(".search-widget-handle").toggleClass("hidden-xs hidden-sm")}),e(".menu li").click(function(t){t||(t=window.event),t.stopPropagation(),e(this).find("ul").length?e(this).toggleClass("toggle-sub"):e(this).parents(".toggle-sub").removeClass("toggle-sub")}),e(".menu li a").click(function(){e(this).hasClass("inner-link")&&e(this).closest(".nav-bar").removeClass("nav-open")}),e(".module.widget-handle").click(function(){e(this).toggleClass("toggle-search")}),e(".search-widget-handle .search-form input").click(function(e){e||(e=window.event),e.stopPropagation()}),e(".slider-arrow-controls").flexslider({controlNav:!1}),e(".logo-carousel").flexslider({minItems:1,maxItems:4,move:1,itemWidth:200,itemMargin:0,animation:"slide",slideshow:!0,slideshowSpeed:3e3,directionNav:!1,controlNav:!1}),e(".lightbox-grid li a").each(function(){var t=e(this).closest(".lightbox-grid").attr("data-gallery-title");e(this).attr("data-lightbox",t)})}),jQuery(window).on("load",function(){if(0!==jQuery(".testimonial-section").length&&(testimonialHeight(),setTimeout(function(){testimonialHeight()},3e3)),jQuery(".masonry").length&&"undefined"!=typeof Masonry){var e=document.querySelector(".masonry"),t=new Masonry(e,{itemSelector:".masonry-item"});t.on("layoutComplete",function(){cl_firstSectionHeight=jQuery(".main-container section:nth-of-type(1)").outerHeight(!0),jQuery(".filters.floating").length&&(setupFloatingProjectFilters(),updateFloatingFilters(),window.addEventListener("scroll",updateFloatingFilters,!1)),jQuery(".masonry").addClass("fadeIn"),jQuery(".masonry-loader").addClass("fadeOut").one("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){jQuery(this).hide()}),jQuery(".masonryFlyIn").length&&i()}),t.layout()}cl_firstSectionHeight=jQuery(".main-container section:nth-of-type(1)").outerHeight(!0)})}(jQuery);