/*!
 * Custom theme scripts
 * 
 * TODO: Make sense of this!
 */
/**
 * Resetting testimonial parallax height
 */
function testimonialHeight(){jQuery(".testimonial-section .parallax-window").css("height",jQuery(".testimonial-section .parallax-window .container").outerHeight()+150),jQuery(window).trigger("resize").trigger("scroll")}!function(i){/**
	 * Function to keep menu fixed to top of page
	 */
function e(){i(window).scrollTop()>o?//if href = #element id
n.addClass("fixed scrolled"):n.removeClass("fixed scrolled")}function t(){var i=jQuery(".masonryFlyIn .masonry-item"),e=0;i.each(function(){var i=jQuery(this);setTimeout(function(){i.addClass("fadeIn")},e),e+=170})}var n,o;
// Execute when HTML-Document is loaded and DOM is ready
jQuery(document).ready(function(i){
//"use strict";
// Make Bootstrap nav first level dropdown clickable
i(window).width()>=767&&i(".navbar-nav > li.menu-item > a").click(function(){window.location=i(this).attr("href")}),
// Smooth scroll to inner links
jQuery(".inner-link").each(function(){var i=jQuery(this).attr("href");"#"!==i.charAt(0)&&jQuery(this).removeClass("inner-link")}),jQuery(".inner-link").click(function(){return jQuery("html, body").animate({scrollTop:0},1e3),!1}),
// Append .background-image-holder <img>s as CSS backgrounds
jQuery(".background-image-holder").each(function(){var i=jQuery(this).children("img").attr("src");jQuery(this).css("background","url('"+i+"')"),jQuery(this).children("img").hide(),jQuery(this).css("background-position","initial")}),
// Fade in background images
setTimeout(function(){jQuery(".background-image-holder").each(function(){jQuery(this).addClass("fadeIn")})},200),
// Fix nav to top while scrolling
n=i("body .nav-container nav:first"),o=i("body .nav-container nav:first").outerHeight(),window.addEventListener("scroll",e,!1),e(),
// Menu dropdown positioning
i(".menu > li > ul").each(function(){var e=i(this).offset(),t=e.left+i(this).outerWidth(!0);if(t>i(window).width()&&!i(this).hasClass("mega-menu"))i(this).addClass("make-right");else if(t>i(window).width()&&i(this).hasClass("mega-menu")){var n=i(window).width()-e.left,o=i(this).outerWidth(!0)-n;i(this).css("margin-left",-o)}}),
// Mobile Menu
i(".mobile-toggle").click(function(){i(".nav-bar").toggleClass("nav-open"),i(this).toggleClass("active"),i(".search-widget-handle").toggleClass("hidden-xs hidden-sm")}),i(".menu li").click(function(e){e||(e=window.event),e.stopPropagation(),i(this).find("ul").length?i(this).toggleClass("toggle-sub"):i(this).parents(".toggle-sub").removeClass("toggle-sub")}),i(".menu li a").click(function(){i(this).hasClass("inner-link")&&i(this).closest(".nav-bar").removeClass("nav-open")}),i(".module.widget-handle").click(function(){i(this).toggleClass("toggle-search")}),i(".search-widget-handle .search-form input").click(function(i){i||(i=window.event),i.stopPropagation()}),
// Image Sliders
i(".slider-all-controls").flexslider({// Not used?
start:function(i){i.find(".slides li:first-child").find(".fs-vid-background video").length&&i.find(".slides li:first-child").find(".fs-vid-background video").get(0).play()},after:function(i){i.find(".fs-vid-background video").length&&(i.find("li:not(.flex-active-slide)").find(".fs-vid-background video").length&&i.find("li:not(.flex-active-slide)").find(".fs-vid-background video").get(0).pause(),i.find(".flex-active-slide").find(".fs-vid-background video").length&&i.find(".flex-active-slide").find(".fs-vid-background video").get(0).play())}}),i(".slider-paging-controls").flexslider({// Not used?
animation:"slide",directionNav:!1}),i(".slider-arrow-controls").flexslider({// Home testimonials widget
controlNav:!1}),i(".slider-thumb-controls .slides li").each(function(){// Not used?
var e=i(this).find("img").attr("src");i(this).attr("data-thumb",e)}),i(".slider-thumb-controls").flexslider({// Not used?
animation:"slide",controlNav:"thumbnails",directionNav:!0}),i(".logo-carousel").flexslider({// Home clients widget
minItems:1,maxItems:4,move:1,itemWidth:200,itemMargin:0,animation:"slide",slideshow:!0,slideshowSpeed:3e3,directionNav:!1,controlNav:!1}),
// Lightbox gallery titles
i(".lightbox-grid li a").each(function(){var e=i(this).closest(".lightbox-grid").attr("data-gallery-title");i(this).attr("data-lightbox",e)})}),
// Execute when complete page is fully loaded, including all frames, objects and images
jQuery(window).on("load",function(){
// Initialize Masonry
if(
// "use strict";
// Resetting testimonial parallax height
0!==jQuery(".testimonial-section").length&&(testimonialHeight(),setTimeout(function(){testimonialHeight()},3e3)),jQuery(".masonry").length&&"undefined"!=typeof Masonry){var i=document.querySelector(".masonry"),e=new Masonry(i,{itemSelector:".masonry-item"});e.on("layoutComplete",function(){cl_firstSectionHeight=jQuery(".main-container section:nth-of-type(1)").outerHeight(!0),
// Fix floating project filters to bottom of projects container
jQuery(".filters.floating").length&&(setupFloatingProjectFilters(),updateFloatingFilters(),window.addEventListener("scroll",updateFloatingFilters,!1)),
// Swap loader for masonry
jQuery(".masonry").addClass("fadeIn"),jQuery(".masonry-loader").addClass("fadeOut").one("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){jQuery(this).hide()}),jQuery(".masonryFlyIn").length&&t()}),e.layout()}
// Navigation height
cl_firstSectionHeight=jQuery(".main-container section:nth-of-type(1)").outerHeight(!0)})}(jQuery);