jQuery(document).ready(function(t){function e(){jQuery(".client-sortable").sortable({handle:".logo_heading"}).bind("sortupdate",function(){var t=0,e=jQuery(this).find("input:first").attr("name"),i=e.substring(0,e.indexOf("][")+1),n=jQuery(this).find("input:first").attr("id"),r=n.substring(0,n.indexOf("-image_src")+11);jQuery(this).find("li").each(function(){jQuery(this).find(".count").html(t+1),jQuery(this).find(".image_src").attr("id",r+""+t).attr("name",i+"[client_logo][img]["+t+"]"),jQuery(this).find(".custom_media_button").attr("data-fieldid",r+""+t),jQuery(this).find(".image_demo").attr("id","img_demo_"+r+t),jQuery(this).find(".client-link").attr("id","link-"+t).attr("name",i+"[client_logo][link]["+t+"]").trigger("change"),t++})}),jQuery(".clone-wrapper").cloneya().on("after_append.cloneya after_delete.cloneya",function(t,e){jQuery(".client-sortable").trigger("sortupdate"),jQuery(e).next("li").find("img").attr("src","")})}function i(e){var i=!0,n=wp.media.editor.send.attachment;t("body").on("click",e,function(){var e="#"+t(this).attr("id"),r=t(e),a=t(this).attr("data-fieldid");return i=!0,wp.media.editor.send.attachment=function(r,d){return i?(t("#"+a).val(d.url).change(),void t("#img_demo_"+a).attr("src",d.url)):n.apply(e,[r,d])},wp.media.editor.open(r),!1})}i(".button.custom_media_button.button-primary"),jQuery(document).on("widget-added",function(){e()}),jQuery(document).on("widget-updated",function(){e()}),e(),jQuery("select.bb-icon").change(function(){jQuery(this).siblings("span").removeClass().addClass("fa "+jQuery(this).val())})});